{% extends "base.html" %}
{% block content %}
<h2>{{ action }} Product</h2>
<div class="card p-3" style="max-width:720px;">
  <form method="post" enctype="multipart/form-data">
    <div class="mb-2">
      <label class="form-label">Name</label>
      <input class="form-control" name="name" required value="{{ product.name if product else '' }}">
    </div>
    <div class="mb-2">
      <label class="form-label">Description</label>
      <textarea class="form-control" name="description">{{ product.description if product else '' }}</textarea>
    </div>
    <div class="row g-2">
      <div class="col">
        <label class="form-label">Price</label>
        <input class="form-control" name="price" type="number" step="0.01" value="{{ product.price if product else '0.00' }}">
      </div>
      <div class="col">
        <label class="form-label">Cost Price (real price)</label>
        <input class="form-control" name="cost_price" type="number" step="0.01" value="{{ product.cost_price if product else '0.00' }}">
      </div>
      <div class="col">
        <label class="form-label">Stock</label>
        <input class="form-control" name="stock" type="number" value="{{ product.stock if product else '0' }}">
      </div>
    </div>

    <div class="mb-2 mt-3">
      <label class="form-label">Product Image</label>
      {% if product and product.image %}
        <div class="mb-2">
          <img src="{{ url_for('static', filename='uploads/' ~ product.image) }}" style="height:120px;object-fit:cover;border-radius:6px;">
        </div>
      {% endif %}
      <input class="form-control" type="file" name="image" accept="image/*">
      <div class="small-muted mt-1">Allowed: png, jpg, jpeg, gif. Max 4MB.</div>
    </div>

    <div class="mt-3">
      <button class="btn btn-gold">{{ action }}</button>
      <a class="btn btn-outline-light" href="{{ url_for('admin_products') }}">Cancel</a>
    </div>
  </form>
</div>
{% endblock %}
